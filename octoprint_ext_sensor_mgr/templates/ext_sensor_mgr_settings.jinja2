<h3>{{ _('External Sensor Manager settings') }}</h3>

<table class="table table-striped table-hover table-condensed table-hover">
    <thead>
        <tr>
            <th>{{ _('Name') }}</th>
            <th></th>
        </tr>
    </thead>
    <tbody data-bind="foreach: sensorList">
        <tr data-bind="click: function() { $root.onSelectSensor($data) }, clickBubble: false">
            <td>
                <input type="checkbox" enabled="false" data-bind="checked: $root.isSelectedSensorCb($data)" />
                <select name="sensor"
                    data-bind="options: $root.supportedSensorList, optionsText: 'name', optionsValue: 'value', value: sensorType">
                </select>
            </td>
            <td>
                <a title="{{ _('Toggle')|edq }}"
                    data-bind="css: $root.toggleSensorButtonCss($data), click: function() { $root.toggleSensor($data) }"></a>
                <a title="{{ _('Remove')|edq }}" class="btn btn-danger"
                    data-bind="click: function() { $root.removeSensor($data) }"><i class="icon-trash"></i></a>
            </td>
        </tr>
    </tbody>
</table>

<div>
    <button class="btn btn-block" data-bind="click: function() { $root.addSensor() }"> {{ _('Add') }}</button>
    <button class="btn btn-block" data-bind="enable: selectedSensor, click: function() { $root.mdfSensor() }"> {{
        _('Configure')
        }}</button>
</div>

<div class="advanced_options">
    <div><small><a href="#" class="muted" data-bind="toggleContent: { class: 'fa-caret-right fa-caret-down', parent: '.advanced_options', container: '.hide' }"><i class="fas fa-caret-right"></i> {{ _('Advanced options') }}</a></small></div>
    <div class="hide">
        <div class="control-group">
            <h3>{{ _('Development') }}</h3>
            <div class="controls">
                <label class="checkbox">
                    <input type="checkbox" data-bind="checked: settingsVM.settings.plugins.ext_sensor_mgr.is_mock_test"> {{ _('Enable mock testing (sensors will use a fake implementation)') }}
                </label>
            </div>
            <div class="controls">
                <label class="checkbox">
                    <input type="checkbox" data-bind="checked: settingsVM.settings.plugins.ext_sensor_mgr.enable_logging"> {{ _('Enable debug logging') }}
                </label>
            </div>
        </div>
    </div>
</div>

<div id="SensorManagerConfigure" data-bind="with: selectedSensor" class="modal hide fade-in">
    <div class="modal-header">
        <a href="#" class="close" data-dismiss="modal" aria-hidden="true">&times;</a>
        <h3>{{ _('Configuration') }}</h3>
    </div>
    <div class="modal-body" data-bind="foreach: $root.selectedSupportedConfigList">
        <div class="control-group" data-bind="if: type == $root._configDataType.Options">
            <label class="control-label" data-bind="text: label ?? param"></label>
            <div class="controls" data-bind="with: $root.matchingParamConfigCb($data, $parent.config)">
                <select class="input-block-level" data-bind="value: value, options: value_list, valueAllowUnset: true"></select>
            </div>
        </div>
        <div class="control-group" data-bind="if: type == $root._configDataType.Text">
            <label class="control-label" data-bind="text: label ?? param"></label>
            <div class="controls" data-bind="with: $root.matchingParamConfigCb($data, $parent.config)">
                <input type="text" class="input-block-level" data-bind="value: value" />
            </div>
        </div>
        {# <div class="control-group">
            <label class="control-label">{{ _('Type') }}</label>
            <div class="controls">
                <select data-bind="value: type, options: ['gcode', 'system'], optionsCaption: 'Select Event Type', valueAllowUnset: true"></select>
            </div>
        </div>
        <div class="control-group">
            <label class="control-label">{{ _('Enabled') }}</label>
            <div class="controls">
                <input type="checkbox" data-bind="checked: enabled" />
            </div>
        </div> #}
    </div>
    <div class="modal-footer">
        <div class="row-fluid">
            <button type="button" class="btn" data-dismiss="modal">{{ _('Close') }}</button>
        </div>
    </div>
</div>